#delimit;set more 1;set mat 300;set logtype text;cap log close;program drop _all;use c:\data\ses\has_76, clear;qui g pvwater=0;qui replace pvwater=1 if wateruse==1 & prvwat==1;qui g gascook=0;qui replace gascook=1 if cookfuel==3 | cookfuel==4;ren boat boatw;ren moto motow;ren aircond aircondw;ren stove stovew;ren sofa sofaw;ren bed bedw;ren fan fanw;ren fridge fridgew;ren irone ironew;ren pote potew;ren radio radiow;ren washmach washw;ren tv tvw;ren bike bikew;g year=76;ren amphoe province;keep  year region province commun block hhno regionz wtp edulh educh clabg clac class occ eprise dbank ageh sexh industh indah wkstathincb hwage hprofit expend2 consexp2 agewt size earner tax inheritpvwater gascook electr phone sofaw bedw stovew fridgew ironew potew radiow tvw motow bikew autow boatw sewingw roomno ownocc rentinc intdiv ;save c:\data\ses\pcw_76, replace;use c:\data\ses\has_81, clear;qui g pvwater=0;qui replace pvwater=1 if wateruse==1;qui g gascook=0;qui replace gascook=1 if cookfuel==4 | cookfuel==6;ren moto motow;ren stove stovew;ren sofa sofaw;ren bed bedw;ren fridge fridgew;ren irone ironew;ren pote potew;ren radio radiow;ren tv tvw;ren bike bikew;g year=81;ren amphoe province;keep  year region province commun block hhno regionz wtp edulh educh clabg clac class occ eprise dbank ageh sexh industh indah wkstathincb hwage hfprof hnfprof htransf hprop hindinc expend2 consexp2 agewt size earner tax inheritpvwater gascook electr phone sofaw bedw stovew fridgew ironew potew radiow tvw motow bikew autow boatw sewingw roomno ownocc rentinc intdiv ;save c:\data\ses\pcw_81, replace;use c:\data\ses\has_86, clear;qui g pvwater=0;qui replace pvwater=1 if wateruse==1;qui g gascook=0;qui replace gascook=1 if cookfuel==4 | cookfuel==6;ren moto motow;ren stove stovew;ren sofa sofaw;ren bed bedw;ren fridge fridgew;ren irone ironew;ren pote potew;ren radio radiow;ren washmach washw;ren tv tvw;ren aircond aircondw;ren vcr vcrw;ren bike bikew;g year=86;ren amphoe province;keep  year region province commun block hhno regionz wtp edulh educh clabg clac class occ eprise dbank ageh sexh industh indah wkstathincb hwage hfprof hnfprof htransf hprop hindinc expend2 consexp2 agewt size earner tax inheritpvwater gascook electr phone sofaw bedw stovew fridgew ironew potew radiow tvw motow bikew autow boatw sewingw roomno ownocc rentinc intdiv ;save c:\data\ses\pcw_86, replace;use c:\data\ses\has_88, clear;qui g pvwater=0;qui replace pvwater=1 if wateruse==1;qui g gascook=0;qui replace gascook=1 if cookfuel==4 | cookfuel==6;ren moto motow;ren aircond aircondw;ren stove stovew;ren sofa sofaw;ren bed bedw;ren fan fanw;ren fridge fridgew;ren irone ironew;ren pote potew;ren radio radiow;ren washmach washw;ren tv tvw;ren vcr vcrw;ren bike bikew;g year=88;ren changwat province;keep  year region province commun block hhno regionz wtp edulh educh clabg clac class occ eprise dbank ageh sexh industh indah wkstathincb hwage hfprof hnfprof htransf hprop hindinc expend2 consexp2 agewt size earner tax inheritpvwater gascook electr phone sofaw bedw stovew fridgew ironew potew radiow tvw motow bikew autow boatw sewingw roomno ownocc rentinc intdiv ;save c:\data\ses\pcw_88, replace;use c:\data\ses\has_90, clear;qui g pvwater=0;qui replace pvwater=1 if wateruse==1;qui g gascook=0;qui replace gascook=1 if cookfuel==4 | cookfuel==6;ren moto motow;ren aircond aircondw;ren stove stovew;ren sofa sofaw;ren bed bedw;ren fan fanw;ren fridge fridgew;ren irone ironew;ren pote potew;ren radio radiow;ren washmach washw;ren tv tvw;ren vcr vcrw;ren bike bikew;g year=90;ren changwat province;keep  year region province commun block hhno regionz wtp edulh educh clabg clac class occ eprise dbank ageh sexh industh indah wkstathincb hwage hfprof hnfprof htransf hprop hindinc expend2 consexp2 agewt size earner tax inheritpvwater gascook electr phone sofaw bedw stovew fridgew ironew potew radiow tvw motow bikew autow boatw sewingw roomno ownocc rentinc intdiv ;save c:\data\ses\pcw_90, replace;use c:\data\ses\has_92, clear;qui g pvwater=0;qui replace pvwater=1 if wateruse==1;qui g gascook=0;qui replace gascook=1 if cookfuel==4 | cookfuel==6;ren moto motow;ren aircond aircondw;ren stove stovew;ren sofa sofaw;ren bed bedw;ren fan fanw;ren fridge fridgew;ren irone ironew;ren pote potew;ren radio radiow;ren washmach washw;ren tv tvw;ren vcr vcrw;ren bike bikew;g year=92;ren changwat province;keep  year region province commun block hhno regionz wtp edulh educh clabg clac class occ eprise dbank ageh sexh industh indah wkstathincb hwage hfprof hnfprof htransf hprop hindinc expend2 consexp2 agewt size earner tax inheritpvwater gascook electr phone sofaw bedw stovew fridgew ironew potew radiow tvw motow bikew autow boatw sewingw roomno ownocc rentinc intdiv ;save c:\data\ses\pcw_92, replace;use c:\data\ses\has_94, clear;qui g pvwater=0;qui replace pvwater=1 if wateruse==1;qui g gascook=0;qui replace gascook=1 if cookfuel>=4 & cookfuel<=5;qui g sofaw=0;qui replace sofaw=1 if sofa>=1;qui g vcrw=0;qui replace vcrw=1 if vcr>=1;qui g stovew=0;qui replace stovew=1 if stove>=1;qui g aircondw=0;qui replace aircondw=1 if aircond>=1;qui g motow=0;qui replace motow=1 if moto>=1;qui g bedw=0;qui replace bedw=1 if bed>=1;qui g fridgew=0;qui replace fridgew=1 if fridge>=1;qui g fanw=0;qui replace fanw=1 if fan>=1;qui g ironew=0;qui replace ironew=1 if irone>=1;qui g potew=0;qui replace potew=1 if pote>=1;qui g radiow=0;qui replace radiow=1 if radio>=1;qui g washw=0;qui replace washw=1 if washmach>=1;qui g tvw=0;qui replace tvw=1 if tv>=1;qui g bikew=0;qui replace bikew=1 if bike>=1;g year=94;ren changwat province;keep  year region province commun block hhno regionz wtp edulh educh clabg clac class occ eprise dbank ageh sexh industh indah wkstathincb hwage hfprof hnfprof htransf hprop hindinc expend2 consexp2 agewt size earner tax inheritpvwater gascook electr phone sofaw bedw stovew fridgew ironew potew radiow tvw motow bikew autow boatw sewingw roomno ownocc rentinc intdiv ;save c:\data\ses\pcw_94, replace;use c:\data\ses\has_96, clear;qui g pvwater=0;qui replace pvwater=1 if wateruse==1;qui g gascook=0;qui replace gascook=1 if cookfuel>=4 & cookfuel<=5;qui g sofaw=0;qui replace sofaw=1 if sofa>=1;qui g vcrw=0;qui replace vcrw=1 if vcr>=1;qui g stovew=0;qui replace stovew=1 if stove>=1;qui g aircondw=0;qui replace aircondw=1 if aircond>=1;qui g motow=0;qui replace motow=1 if moto>=1;qui g bedw=0;qui replace bedw=1 if bed>=1;qui g fridgew=0;qui replace fridgew=1 if fridge>=1;qui g fanw=0;qui replace fanw=1 if fan>=1;qui g ironew=0;qui replace ironew=1 if irone>=1;qui g potew=0;qui replace potew=1 if pote>=1;qui g radiow=0;qui replace radiow=1 if radio>=1;qui g washw=0;qui replace washw=1 if washmach>=1;qui g tvw=0;qui replace tvw=1 if tv>=1;qui g bikew=0;qui replace bikew=1 if bike>=1;g year=96;ren changwat province;keep  year region province commun block hhno regionz wtp edulh educh clabg clac class occ eprise dbank ageh sexh industh indah wkstathincb hwage hfprof hnfprof htransf hprop hindinc expend2 consexp2 agewt size earner tax inheritpvwater gascook electr phone sofaw bedw stovew fridgew ironew potew radiow tvw motow bikew autow boatw sewingw roomno ownocc rentinc intdiv ;save c:\data\ses\pcw_96, replace;use c:\data\ses\pcw_76, clear;append using c:\data\ses\pcw_81;append using c:\data\ses\pcw_86;append using c:\data\ses\pcw_88;append using c:\data\ses\pcw_90;append using c:\data\ses\pcw_92;append using c:\data\ses\pcw_94;append using c:\data\ses\pcw_96;log using c:\data\ses\pcwealth, text replace;******* Principal Component for Asset Ownership ********;g fininc= rentinc+intdiv+ownocc;qui su fininc [w=wtp];qui g finbar=r(mean);factor pvwater gascook electr phone sofaw bedw stovew fridgew ironew potew radiow tvw motow autow  sewingw boatw bikew [w=wtp], pc factor(3);score pca1;qui su pca1 [w=wtp];qui g pca1min=r(min);qui g pcasset1=finbar*(pca1-pca1min);qui g pcwealth1=pcasset1+fininc;factor pvwater gascook electr phone sofaw bedw stovew fridgew ironew potew radiow tvw motow autow  sewingw boatw bikew [w=wtp], pc factor(3) cov;score pca2;qui g pcasset2=finbar*pca2;qui g pcwealth2=pcasset2+fininc;factor pvwater gascook electr phone sofaw bedw stovew fridgew ironew potew radiow tvw motow autow  sewingw boatw bikew fininc [w=wtp], pc factor(3);score pcw;qui su pcw [w=wtp];qui g pcwmin=r(min);qui g pcwealth3=finbar*(pcw-pcwmin);pwcorr pcwealth1 pcasset1 pcwealth2 pcasset2 pcwealth3 pcw fininc [w=wtp];su pvwater gascook electr phone sofaw bedw stovew fridgew ironew potew radiow tvw motow  autow  sewingw boatw bikew [w=wtp];su pcwealth1 pcasset1 pca1 pcwealth2 pcasset2 pca2 pcwealth3 pcw fininc [w=wtp], detail;log close;keep  year region province commun block hhno regionz wtp edulh educh clabg clac class occ eprise dbank ageh sexh industh indah wkstathincb hwage hfprof hnfprof htransf hprop hindinc expend2 consexp2 agewt size earner tax inheritpvwater gascook electr phone sofaw bedw stovew fridgew ironew potew radiow tvw motow bikew autow boatw sewingw roomno ownocc rentinc intdiv pcwealth1 pcasset1 pca1 pcwealth2 pcasset2 pca2 pcwealth3 pcw fininc;sort year region province commun block hhno;save c:\data\ses\pcwealth, replace;